<div class="page-container">
  <div class="page-content">
    <!-- Header -->
    <div class="faq-header animate-fade-in-up">
      <h1 class="page-title">Frequently Asked Questions</h1>
      <p class="page-subtitle">Find answers to common questions about RClone Manager</p>
    </div>

    <!-- Category Filter -->
    <div class="category-filter animate-fade-in-up animate-delay-1">
      <h2 class="section-title">
        <mat-icon>category</mat-icon>
        Browse by Category
      </h2>
      <div class="category-chips">
        @for (category of categories; track category.id) {
          <mat-chip 
            [class]="selectedCategory === category.id ? 'selected' : ''"
            (click)="selectCategory(category.id)">
            <p>
            <mat-icon>{{ category.icon }}</mat-icon>
            {{ category.name }}
            </p>
          </mat-chip>
        }
      </div>
    </div>

    <!-- FAQ Items -->
    <div class="faq-section animate-fade-in-up animate-delay-2">
      @if (isLoading) {
        <div class="loading-state">
          <mat-spinner diameter="50"></mat-spinner>
          <h3>Loading FAQ...</h3>
          <p>Fetching the latest questions and answers from GitHub Wiki</p>
        </div>
      } @else if (error) {
        <div class="error-state">
          <mat-icon class="error-icon">error</mat-icon>
          <h3>Failed to Load FAQ</h3>
          <p>{{ error }}</p>
          <button mat-raised-button color="primary" (click)="retryLoading()">
            <mat-icon>refresh</mat-icon>
            Retry
          </button>
        </div>
      } @else {
        <div class="faq-controls">
          <h2 class="section-title">
            <mat-icon>help</mat-icon>
            {{ getCategoryDisplayName() }}
            <span class="question-count">({{ filteredFaqItems.length }})</span>
          </h2>
        </div>

        @if (filteredFaqItems.length > 0) {
        <mat-accordion class="faq-accordion">
          @for (item of filteredFaqItems; track item.id) {
            <mat-expansion-panel [expanded]="item.isExpanded" class="faq-panel">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <div class="question-title">
                    <mat-icon class="question-icon">help_outline</mat-icon>
                    <span>{{ item.question }}</span>
                  </div>
                </mat-panel-title>
                <mat-panel-description>
                  @if (item.tags && item.tags.length > 0) {
                    <div class="question-tags">
                      @for (tag of item.tags.slice(0, 2); track tag) {
                        <span class="tag">{{ tag }}</span>
                      }
                    </div>
                  }
                </mat-panel-description>
              </mat-expansion-panel-header>
              
              <div class="answer-content">
                <div class="answer-text">
                  <mat-icon class="answer-icon">lightbulb</mat-icon>
                  <p>{{ item.answer }}</p>
                </div>
                @if (item.tags && item.tags.length > 0) {
                  <div class="answer-tags">
                    <span class="tags-label">Tags:</span>
                    @for (tag of item.tags; track tag) {
                      <mat-chip class="answer-tag">{{ tag }}</mat-chip>
                    }
                  </div>
                }
              </div>
            </mat-expansion-panel>
          }
        </mat-accordion>
        } @else {
          <div class="no-results">
            <mat-icon class="no-results-icon">search_off</mat-icon>
            <h3>No questions found</h3>
            <p>No questions match the selected category. Try selecting a different category or check our help links below.</p>
          </div>
        }
      }
    </div>    <!-- Help Links Section -->
    <div class="help-section animate-fade-in-up animate-delay-3">
      <h2 class="section-title">
        <mat-icon>support</mat-icon>
        Need More Help?
      </h2>
      <p class="help-subtitle">
        Can't find what you're looking for? Here are additional ways to get support:
      </p>
      
      <div class="help-links">
        @for (link of helpLinks; track link.title) {
          <mat-card class="help-card hover-lift" (click)="openExternalLink(link.url)">
            <mat-card-content>
              <div class="help-card-content">
                <div class="help-icon">
                  <mat-icon [class]="link.type">{{ link.icon }}</mat-icon>
                </div>
                <div class="help-text">
                  <h3 class="help-title">{{ link.title }}</h3>
                  <p class="help-description">{{ link.description }}</p>
                </div>
                <mat-icon class="external-icon">open_in_new</mat-icon>
              </div>
            </mat-card-content>
          </mat-card>
        }
      </div>
    </div>

    <!-- Community & Contributing -->
    <div class="community-section animate-fade-in-up animate-delay-4">
      <h2 class="section-title">
        <mat-icon>people</mat-icon>
        Community & Contributing
      </h2>
      <p class="community-subtitle">
        RClone Manager is an open source project. Join our community and help make it better!
      </p>
      
      <div class="community-grid">
        <mat-card class="community-card hover-lift" (click)="openExternalLink('https://github.com/RClone-Manager/rclone-manager')">
          <mat-card-content>
            <div class="community-card-content">
              <div class="community-icon">
                <mat-icon class="primary">code</mat-icon>
              </div>
              <div class="community-text">
                <h3 class="community-title">Source Code</h3>
                <p class="community-description">View the source code, star the project, and track development progress</p>
              </div>
              <mat-icon class="external-icon">open_in_new</mat-icon>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="community-card hover-lift" (click)="openExternalLink('https://github.com/RClone-Manager/rclone-manager/blob/main/CONTRIBUTING.md')">
          <mat-card-content>
            <div class="community-card-content">
              <div class="community-icon">
                <mat-icon class="accent">handshake</mat-icon>
              </div>
              <div class="community-text">
                <h3 class="community-title">Contributing Guide</h3>
                <p class="community-description">Learn how to contribute code, documentation, or translations</p>
              </div>
              <mat-icon class="external-icon">open_in_new</mat-icon>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="community-card hover-lift" (click)="openExternalLink('https://github.com/RClone-Manager/rclone-manager/security/advisories')">
          <mat-card-content>
            <div class="community-card-content">
              <div class="community-icon">
                <mat-icon class="warn">security</mat-icon>
              </div>
              <div class="community-text">
                <h3 class="community-title">Security</h3>
                <p class="community-description">Report security vulnerabilities responsibly through GitHub</p>
              </div>
              <mat-icon class="external-icon">open_in_new</mat-icon>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="community-card hover-lift" (click)="openExternalLink('https://github.com/RClone-Manager/rclone-manager/releases')">
          <mat-card-content>
            <div class="community-card-content">
              <div class="community-icon">
                <mat-icon class="primary">rocket_launch</mat-icon>
              </div>
              <div class="community-text">
                <h3 class="community-title">Releases</h3>
                <p class="community-description">View release notes, changelog, and download previous versions</p>
              </div>
              <mat-icon class="external-icon">open_in_new</mat-icon>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

    <!-- Additional Resources -->
    <div class="resources-section animate-fade-in-up animate-delay-5">
      <mat-card class="resources-card">
        <mat-card-content>
          <div class="resources-content">
            <mat-icon class="resources-icon">info</mat-icon>
            <div class="resources-text">
              <h3>Additional Resources</h3>
              <p>
                For detailed guides and tutorials, visit our 
                <a href="/docs" class="inline-link">Documentation</a>. 
                You can also check the official 
                <a href="https://rclone.org/docs/" target="_blank" class="inline-link">
                  rclone documentation
                  <mat-icon class="inline-icon">open_in_new</mat-icon>
                </a> 
                for advanced configuration options.
              </p>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
